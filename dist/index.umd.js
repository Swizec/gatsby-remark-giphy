!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("unist-util-visit"),require("giphy-api")):"function"==typeof define&&define.amd?define(["unist-util-visit","giphy-api"],t):e.gatsbyRemarkGiphy=t(e.unistUtilVisit,e.giphyClient)}(this,function(e,t){function r(e){return"giphy-result:"+e}return t=t&&t.hasOwnProperty("default")?t.default:t,"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))),function(n,i){var o=n.cache,u=n.markdownAST;try{var a=[],s=t({apiKey:i.giphyApiKey,https:!0});return e.visit(u,"image",function(e){var t=e.url;t.startsWith("giphy:")&&a.push(function(){try{var n=t.replace(/^giphy:/,"").replace(/_/g," ");return Promise.resolve(o.get(r(n))).then(function(t){var i=!1;function u(e){if(i)return e}var a=function(){if(!t){var u=function(e,i){try{var u=Promise.resolve(s.search(n)).then(function(e){t=e.data[0],o.set(r(n),t)})}catch(e){return i(e)}return u&&u.then?u.then(void 0,i):u}(0,function(t){t.message="The following error appeared while transforming Giphy for "+n+":\n\n"+t.message,console.error(t),e.type="text",e.value="",i=!0});if(u&&u.then)return u.then(function(){})}}();return a&&a.then?a.then(u):u(a)})}catch(e){return Promise.reject(e)}})}),Promise.resolve(Promise.all(a.map(function(e){return e()}))).then(function(){return u})}catch(e){return Promise.reject(e)}}});
//# sourceMappingURL=index.umd.js.map
