function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var r=e(require("unist-util-visit")),t=e(require("giphy-api"));"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))),module.exports=function(e,n){var o=e.cache,i=e.markdownAST;try{var a=[],u=t({apiKey:n.giphyApiKey,https:!0});return r(i,"image",function(e){var r=e.url;r.startsWith("giphy:")&&a.push(function(){try{var t=r.replace(/^giphy:/,"");return Promise.resolve(o.get(t)).then(function(r){function n(n){e.url=r[0].images.downsized_large.url,e.alt=t,e.title=e.title||t}var i=function(){if(!r)return function(e,n){try{var i=Promise.resolve(u.search(t)).then(function(e){r=e.data,o.set(t,e.data)})}catch(e){return n(e)}return i&&i.then?i.then(void 0,n):i}(0,function(e){throw e.message="The following error appeared while searching Giphy for "+t+":\n\n"+e.message,e})}();return i&&i.then?i.then(n):n()})}catch(e){return Promise.reject(e)}})}),Promise.resolve(Promise.all(a.map(function(e){return e()}))).then(function(){return i})}catch(e){return Promise.reject(e)}};
//# sourceMappingURL=index.js.map
